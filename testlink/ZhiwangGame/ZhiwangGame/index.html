<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <link rel="stylesheet" href="./css/font-awesome.min.css">
  <link rel="stylesheet" href="./css/index.css">
</head>

<body>
  <div class="start-window">
    <h5>小程修改完论文的最后一处，合上电脑，回想自己六年的研究生生涯。打印机不断轰鸣，几万字的心血化为一沓厚厚的纸张。这份论文最终会去向何处呢？</h5>
    <button onclick="showTestWindow()">测一测你的论文能有多大影响力</button>
  </div>
  <div class="test-window">
    <h5>
      假如我在
      <select name="year" id="year">
        <option value="0">年份</option>
        <option value="2018">2018</option>
        <option value="2017">2017</option>
        <option value="2016">2016</option>
        <option value="2015">2015</option>
        <option value="2014">2014</option>
        <option value="2013">2013</option>
        <option value="2012">2012</option>
        <option value="2011">2011</option>
        <option value="2010">2010</option>
        <option value="2009">2009</option>
        <option value="2008">2008</option>
      </select>
      发表了主题关于
      <select name="keyword" id="keyword">
        <option value="0">学科</option>
        <option value="法学">法学</option>
        <option value="工学">工学</option>
        <option value="管理学">管理学</option>
        <option value="教育学">教育学</option>
        <option value="理学">理学</option>
        <option value="历史学">历史学</option>
        <option value="农学">农学</option>
        <option value="文学">文学</option>
        <option value="医学">医学</option>
        <option value="医学">医学</option>
      </select>
      的
      <select name="level" id="level">
        <option value="0">层次</option>
        <option value="博士">博士</option>
        <option value="硕士">硕士</option>
      </select>
      学位论文
      <button onclick="test()">开始测试</button>
    </h5>
    <div class="result">
      <i class="fa fa-user fa-fw icon"></i>
      <h5>
        那么到目前为止，这篇论文可能已经被引用了<span class="median">0</span>次
        <br>
        如果你足够优秀，那么可能已经被引用了<span class="max">0</span>次
      </h5>
    </div>
  </div>
</body>
<script src="./data.js"></script>
<script>
  let startWindow = document.querySelector('.start-window');
  let testWindow = document.querySelector('.test-window');
  let resultDiv = document.querySelector('.result');
  let sYear = document.querySelector('#year');
  let sKeyword = document.querySelector('#keyword');
  let sLevel = document.querySelector('#level');
  let median = document.querySelector('.median');
  let max = document.querySelector('.max');

  function showTestWindow() {
    startWindow.setAttribute('class', 'start-window out');
    setTimeout(_ => {
      startWindow.style.display = "none";
      testWindow.setAttribute('class', 'test-window in');
    }, 800);
  }

  function test () {
    let year = sYear.value;
    let keyword = sKeyword.value;
    let level = sLevel.value;
    if (year === '0' || keyword === '0' || level === '0') {
      alert('请选择年份/关键词/层次');
      return;
    }
    let currentData = data.find(item => item['学科'] === keyword && item['年份'] === year && item['层次'] === level) || {};
    resultDiv.setAttribute('class', 'result in');
    median.innerHTML = currentData['中位数'];
    max.innerHTML = currentData['最大数'];
  }
</script>

</html>